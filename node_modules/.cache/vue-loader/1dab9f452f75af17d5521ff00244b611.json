{"remainingRequest":"/Users/guohan3/VSCodeProjects/erp/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/guohan3/VSCodeProjects/erp/src/components/customer/customer.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/guohan3/VSCodeProjects/erp/src/components/customer/customer.vue","mtime":1586250827719},{"path":"/Users/guohan3/VSCodeProjects/erp/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/guohan3/VSCodeProjects/erp/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/guohan3/VSCodeProjects/erp/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/guohan3/VSCodeProjects/erp/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/guohan3/VSCodeProjects/erp/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmV4cG9ydCBkZWZhdWx0IHsKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgZGlhbG9nVGl0bGU6ICLmt7vliqDnlKjmiLciLAogICAgICBjdXN0b21lckZvcm06IHsKICAgICAgICBjdXN0b21lcklkOiAiIiwKICAgICAgICByZWdpb246ICLljY7kuJwiLAogICAgICAgIGNvdW50cnk6ICIiLAogICAgICAgIGN1c3RvbWVyTmFtZTogIiIsCiAgICAgICAgY3VzdG9tZXJTaW1wbGVOYW1lOiAiIgogICAgICB9LAogICAgICBkaWFsb2dWaXNpYmxlOiBmYWxzZSwKICAgICAgcXVlcnlJbmZvOiB7CiAgICAgICAgcGFnZU51bTogMQogICAgICB9LAogICAgICB0b3RhbFBhZ2U6IDQsCiAgICAgIGRpc2FibGVJbnB1dDogZmFsc2UsCiAgICAgIGN1c3RvbWVyTGlzdDogW10KICAgIH07CiAgfSwKICBjcmVhdGVkKCkgewogICAgdGhpcy5nZXRDdXN0b21lckxpc3QoKTsKICB9LAogIG1ldGhvZHM6IHsKICAgIGNsb3NlRm9ybSgpIHsKICAgICAgLy8gICB0aGlzLiRyZWZzLmN1c3RvbWVyRm9ybVJlZi5yZXNldEZpZWxkcygpOwogICAgfSwKICAgIC8vIOeCueWHu+e8lui+keWuouaIt+aMiemSrgogICAgZWRpdEN1c3RvbWVyKGN1c3RvbWVyKSB7CiAgICAgIHRoaXMuZGlhbG9nVGl0bGUgPSAi5L+u5pS55a6i5oi3IjsKICAgICAgdGhpcy5kaWFsb2dWaXNpYmxlID0gdHJ1ZTsKICAgICAgdGhpcy5jdXN0b21lckZvcm0gPSBjdXN0b21lcjsKICAgICAgdGhpcy5kaXNhYmxlSW5wdXQgPSB0cnVlOwogICAgfSwKICAgIC8v5pu05paw5a6i5oi35L+h5oGvCiAgICBhc3luYyB1cGRhdGVDdXN0b21lcigpIHsKICAgICAgY29uc29sZS5sb2codGhpcy5jdXN0b21lckZvcm0pOwogICAgICBjb25zdCB7IGRhdGE6IHJlcyB9ID0gYXdhaXQgdGhpcy4kaHR0cC5wb3N0KAogICAgICAgICJjdXN0b21lci91cGRhdGVDdXN0b21lciIsCiAgICAgICAgdGhpcy5jdXN0b21lckZvcm0KICAgICAgKTsKICAgICAgdGhpcy5kaWFsb2dWaXNpYmxlID0gZmFsc2U7CiAgICAgIGlmIChyZXMuY29kZSA9PSAwKSB7CiAgICAgICAgdGhpcy4kbWVzc2FnZS5zdWNjZXNzKHJlcy5tc2cpOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IocmVzLm1zZyk7CiAgICAgIH0KICAgIH0sCgogICAgLy8g5Yig6Zmk5a6i5oi3CiAgICBkZWxldGVDdXN0b21lcihjdXN0b21lcikgewogICAgICB0aGlzLiRjb25maXJtKCLnoa7lrprliKDpmaTlrqLmiLc/5q2k5pON5L2c5LiN5Y+v6YCGIiwgIuitpuWRiiIsIHsKICAgICAgICBjb25maXJtQnV0dG9uVGV4dDogIuehruWumuWIoOmZpCIsCiAgICAgICAgY2FuY2VsQnV0dG9uVGV4dDogIuWPlua2iCIsCiAgICAgICAgdHlwZTogIndhcm5pbmciCiAgICAgIH0pLnRoZW4oYXN5bmMgKCkgPT4gewogICAgICAgIGNvbnN0IHsgZGF0YTogcmVzIH0gPSBhd2FpdCB0aGlzLiRodHRwLnBvc3QoCiAgICAgICAgICAiY3VzdG9tZXIvZGVsZXRlQ3VzdG9tZXIiLAogICAgICAgICAgY3VzdG9tZXIKICAgICAgICApOwogICAgICAgIGlmIChyZXMuY29kZSA9PSAwKSB7CiAgICAgICAgICB0aGlzLiRtZXNzYWdlLnN1Y2Nlc3MocmVzLm1zZyk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IocmVzLm1zZyk7CiAgICAgICAgfQogICAgICAgIHRoaXMuZ2V0Q3VzdG9tZXJMaXN0KCk7CiAgICAgIH0pLmNhdGNoKCgpPT4nJykKICAgIH0sCiAgICAvLyDngrnlh7vkuobmt7vliqDlrqLmiLfmjInpkq4KICAgIGFkZEN1c3RvbWVyQnRuQ2xpY2soKSB7CiAgICAgIHRoaXMuZGlhbG9nVGl0bGUgPSAi5re75Yqg55So5oi3IjsKICAgICAgdGhpcy5jdXN0b21lckZvcm0gPSB7IHJlZ2lvbjogIuWNjuS4nCIgfTsKICAgICAgY29uc29sZS5sb2codGhpcy5kZWZhdWx0Q3VzdG9tZXJGb3JtKTsKICAgICAgdGhpcy5kaWFsb2dWaXNpYmxlID0gdHJ1ZTsKICAgICAgdGhpcy5kaXNhYmxlSW5wdXQgPSBmYWxzZTsKICAgIH0sCiAgICBhc3luYyBhZGRDdXN0b21lcigpIHsKICAgICAgY29uc3QgeyBkYXRhOiByZXMgfSA9IGF3YWl0IHRoaXMuJGh0dHAucG9zdCgKICAgICAgICAiY3VzdG9tZXIvYWRkQ3VzdG9tZXIiLAogICAgICAgIHRoaXMuY3VzdG9tZXJGb3JtCiAgICAgICk7CiAgICAgIGlmIChyZXMuY29kZSA9PSAwKSB7CiAgICAgICAgdGhpcy4kbWVzc2FnZS5zdWNjZXNzKCLmt7vliqDmiJDlip8iKTsKICAgICAgICB0aGlzLmRpYWxvZ1Zpc2libGUgPSBmYWxzZTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKHJlcy5tc2cpOwogICAgICB9CiAgICAgIHRoaXMuZ2V0Q3VzdG9tZXJMaXN0KCkKICAgIH0sCiAgICBhc3luYyBnZXRDdXN0b21lckxpc3QoKSB7CiAgICAgIGNvbnN0IHsgZGF0YTogcmVzIH0gPSBhd2FpdCB0aGlzLiRodHRwLnBvc3QoCiAgICAgICAgImN1c3RvbWVyL2dldEN1c3RvbWVyQnlQYWdlIiwKICAgICAgICB0aGlzLnF1ZXJ5SW5mbwogICAgICApOwogICAgICBpZiAocmVzLmNvZGUgPT0gMCkgewogICAgICAgIHRoaXMudG90YWxQYWdlID0gcmVzLm1zZy50b3RhbFBhZ2U7CiAgICAgICAgdGhpcy5jdXN0b21lckxpc3QgPSByZXMubXNnLmN1c3RvbWVyTGlzdDsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCLmn6Xor6LlpLHotKUs6K+36IGU57O7566h55CG5ZGYIik7CiAgICAgIH0KICAgIH0sCiAgICAvLyDpobXnoIHmlLnlj5jml7YKICAgIGhhbmRsZVBhZ2VDaGFuZ2UoY3VycmVudFBhZ2UpIHsKICAgICAgY29uc29sZS5sb2coY3VycmVudFBhZ2UpOwogICAgICB0aGlzLnF1ZXJ5SW5mby5wYWdlTnVtID0gY3VycmVudFBhZ2U7CiAgICAgIHRoaXMuZ2V0Q3VzdG9tZXJMaXN0KCk7CiAgICB9CiAgfQp9Owo="},{"version":3,"sources":["customer.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"customer.vue","sourceRoot":"src/components/customer","sourcesContent":["<template>\n  <div>\n    <el-card class=\"box-card\">\n      <el-row>\n        <el-button type=\"primary\" @click=\"addCustomerBtnClick\">添加客户</el-button>\n      </el-row>\n    </el-card>\n\n    <el-table :data=\"customerList\" style=\"width: 100%\" border stripe>\n      <el-table-column type=\"index\" label=\"#\"></el-table-column>\n      <el-table-column prop=\"customerId\" label=\"客户编号\" width=\"180\"></el-table-column>\n      <el-table-column prop=\"region\" label=\"区域\" width=\"180\"></el-table-column>\n      <el-table-column prop=\"country\" label=\"城市\"></el-table-column>\n      <el-table-column prop=\"customerName\" label=\"姓名\"></el-table-column>\n      <el-table-column prop=\"customerSimpleName\" label=\"客户简称\"></el-table-column>\n      <el-table-column label=\"操作\">\n        <template slot-scope=\"scope\">\n          <el-button\n            type=\"primary\"\n            icon=\"el-icon-edit\"\n            size=\"mini\"\n            @click=\"editCustomer(scope.row)\"\n          ></el-button>\n          <el-button\n            type=\"danger\"\n            icon=\"el-icon-delete\"\n            size=\"mini\"\n            @click=\"deleteCustomer(scope.row)\"\n          ></el-button>\n        </template>\n      </el-table-column>\n    </el-table>\n    <el-pagination\n      background\n      layout=\"prev, pager, next\"\n      :page-count=\"totalPage\"\n      :current-page=\"queryInfo.pageNum\"\n      @current-change=\"handlePageChange\"\n    ></el-pagination>\n    <el-dialog :title=\"dialogTitle\" :visible.sync=\"dialogVisible\" width=\"50%\" @close=\"closeForm\">\n      <el-form ref=\"customerFormRef\" :model=\"customerForm\" label-width=\"100px\" class=\"login_form\">\n        <!-- 用户名 -->\n        <el-form-item label=\"客户编号\" prop=\"customerId\">\n          <el-input v-model=\"customerForm.customerId\" :disabled=\"disableInput\"></el-input>\n        </el-form-item>\n\n        <el-form-item label=\"活动区域\" prop=\"region\">\n          <el-select v-model=\"customerForm.region\">\n            <el-option label=\"华北\" value=\"华北\"></el-option>\n            <el-option label=\"华东\" value=\"华东\"></el-option>\n          </el-select>\n        </el-form-item>\n        <el-form-item label=\"客户城市\" prop=\"country\">\n          <el-input v-model=\"customerForm.country\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"客户姓名\" prop=\"customerName\">\n          <el-input v-model=\"customerForm.customerName\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"客户简称\" prop=\"customerSimpleName\">\n          <el-input v-model=\"customerForm.customerSimpleName\"></el-input>\n        </el-form-item>\n      </el-form>\n\n      <span slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"dialogVisible = false\">取 消</el-button>\n        <el-button type=\"primary\" @click=\"disableInput?updateCustomer():addCustomer()\">确 定</el-button>\n      </span>\n    </el-dialog>\n  </div>\n</template>\n\n<script>\nexport default {\n  data() {\n    return {\n      dialogTitle: \"添加用户\",\n      customerForm: {\n        customerId: \"\",\n        region: \"华东\",\n        country: \"\",\n        customerName: \"\",\n        customerSimpleName: \"\"\n      },\n      dialogVisible: false,\n      queryInfo: {\n        pageNum: 1\n      },\n      totalPage: 4,\n      disableInput: false,\n      customerList: []\n    };\n  },\n  created() {\n    this.getCustomerList();\n  },\n  methods: {\n    closeForm() {\n      //   this.$refs.customerFormRef.resetFields();\n    },\n    // 点击编辑客户按钮\n    editCustomer(customer) {\n      this.dialogTitle = \"修改客户\";\n      this.dialogVisible = true;\n      this.customerForm = customer;\n      this.disableInput = true;\n    },\n    //更新客户信息\n    async updateCustomer() {\n      console.log(this.customerForm);\n      const { data: res } = await this.$http.post(\n        \"customer/updateCustomer\",\n        this.customerForm\n      );\n      this.dialogVisible = false;\n      if (res.code == 0) {\n        this.$message.success(res.msg);\n      } else {\n        this.$message.error(res.msg);\n      }\n    },\n\n    // 删除客户\n    deleteCustomer(customer) {\n      this.$confirm(\"确定删除客户?此操作不可逆\", \"警告\", {\n        confirmButtonText: \"确定删除\",\n        cancelButtonText: \"取消\",\n        type: \"warning\"\n      }).then(async () => {\n        const { data: res } = await this.$http.post(\n          \"customer/deleteCustomer\",\n          customer\n        );\n        if (res.code == 0) {\n          this.$message.success(res.msg);\n        } else {\n          this.$message.error(res.msg);\n        }\n        this.getCustomerList();\n      }).catch(()=>'')\n    },\n    // 点击了添加客户按钮\n    addCustomerBtnClick() {\n      this.dialogTitle = \"添加用户\";\n      this.customerForm = { region: \"华东\" };\n      console.log(this.defaultCustomerForm);\n      this.dialogVisible = true;\n      this.disableInput = false;\n    },\n    async addCustomer() {\n      const { data: res } = await this.$http.post(\n        \"customer/addCustomer\",\n        this.customerForm\n      );\n      if (res.code == 0) {\n        this.$message.success(\"添加成功\");\n        this.dialogVisible = false;\n      } else {\n        this.$message.error(res.msg);\n      }\n      this.getCustomerList()\n    },\n    async getCustomerList() {\n      const { data: res } = await this.$http.post(\n        \"customer/getCustomerByPage\",\n        this.queryInfo\n      );\n      if (res.code == 0) {\n        this.totalPage = res.msg.totalPage;\n        this.customerList = res.msg.customerList;\n      } else {\n        this.$message.error(\"查询失败,请联系管理员\");\n      }\n    },\n    // 页码改变时\n    handlePageChange(currentPage) {\n      console.log(currentPage);\n      this.queryInfo.pageNum = currentPage;\n      this.getCustomerList();\n    }\n  }\n};\n</script>\n\n<style lang=\"less\" scoped>\n</style>"]}]}